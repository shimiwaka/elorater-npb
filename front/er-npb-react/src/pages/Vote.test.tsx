import Vote from './Vote';
import { waitFor, render, screen } from '@testing-library/react';
import axios from 'axios'

test('test Vote component', async () => {
  jest.spyOn(axios, 'get').mockResolvedValue({"data": {"error":false,"token":"e6c09528e42041dcd7a019815f856976","player1":{"id":1934,"name":"安部　友裕","birth":"1989.6.24生","bt":"右投左打","pitchingCareerHigh":{"year":"","game":0,"starter":0,"cg":0,"shutout":0,"win":0,"lose":0,"save":0,"hold":0,"inning":0,"k":0,"era":0,"whip":0,"mlb":false},"battingCareerHigh":{"year":"2017","game":123,"pa":455,"atbat":413,"hit":128,"twoBase":17,"threeBase":4,"hr":4,"rbi":49,"sb":17,"cs":5,"sh":12,"sf":1,"bb":27,"iw":1,"hbp":2,"so":94,"avg":0.31,"obp":0.354,"slg":0.4,"ops":0.754,"mlb":false},"pitchingTotal":{"year":"","game":0,"starter":0,"cg":0,"shutout":0,"win":0,"lose":0,"save":0,"hold":0,"inning":0,"k":0,"era":0,"whip":0,"mlb":false},"battingTotal":{"year":"国内通算","game":700,"pa":1882,"atbat":1680,"hit":443,"twoBase":67,"threeBase":12,"hr":25,"rbi":160,"sb":49,"cs":16,"sh":53,"sf":12,"bb":129,"iw":8,"hbp":7,"so":406,"avg":0.264,"obp":0.317,"slg":0.363,"ops":0.68,"mlb":false},"pitchingMLBTotal":{"year":"","game":0,"starter":0,"cg":0,"shutout":0,"win":0,"lose":0,"save":0,"hold":0,"inning":0,"k":0,"era":0,"whip":0,"mlb":false},"battingMLBTotal":{"year":"","game":0,"pa":0,"atbat":0,"hit":0,"twoBase":0,"threeBase":0,"hr":0,"rbi":0,"sb":0,"cs":0,"sh":0,"sf":0,"bb":0,"iw":0,"hbp":0,"so":0,"avg":0,"obp":0,"slg":0,"ops":0,"mlb":false}},"player2":{"id":457,"name":"緋本　祥好","birth":"1935.3.6生","bt":"右投右打","pitchingCareerHigh":{"year":"","game":0,"starter":0,"cg":0,"shutout":0,"win":0,"lose":0,"save":0,"hold":0,"inning":0,"k":0,"era":0,"whip":0,"mlb":false},"battingCareerHigh":{"year":"1956","game":105,"pa":385,"atbat":352,"hit":85,"twoBase":13,"threeBase":4,"hr":15,"rbi":43,"sb":7,"cs":5,"sh":7,"sf":1,"bb":21,"iw":0,"hbp":4,"so":99,"avg":0.241,"obp":0.292,"slg":0.429,"ops":0.721,"mlb":false},"pitchingTotal":{"year":"","game":0,"starter":0,"cg":0,"shutout":0,"win":0,"lose":0,"save":0,"hold":0,"inning":0,"k":0,"era":0,"whip":0,"mlb":false},"battingTotal":{"year":"国内通算","game":632,"pa":1351,"atbat":1221,"hit":265,"twoBase":43,"threeBase":12,"hr":24,"rbi":108,"sb":21,"cs":16,"sh":22,"sf":6,"bb":93,"iw":1,"hbp":9,"so":294,"avg":0.217,"obp":0.276,"slg":0.331,"ops":0.607,"mlb":false},"pitchingMLBTotal":{"year":"","game":0,"starter":0,"cg":0,"shutout":0,"win":0,"lose":0,"save":0,"hold":0,"inning":0,"k":0,"era":0,"whip":0,"mlb":false},"battingMLBTotal":{"year":"","game":0,"pa":0,"atbat":0,"hit":0,"twoBase":0,"threeBase":0,"hr":0,"rbi":0,"sb":0,"cs":0,"sh":0,"sf":0,"bb":0,"iw":0,"hbp":0,"so":0,"avg":0,"obp":0,"slg":0,"ops":0,"mlb":false}}}});
  render(<Vote />);

  let buttons;
  await waitFor(() => {
    buttons = screen.getAllByRole('button');
  });

});